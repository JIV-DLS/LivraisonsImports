<main role="main">
  <div class="single-pro-review-area mt-t-30 mg-b-15" *ngIf="add">
          <div class="container-fluid">
                    
              <div class="row">
                  <div *ngIf="marchAdder" id="PrimaryModalalert" class="modal modal-edu-general default-popup-PrimaryModal fade in" role="dialog" style="display: block;">
                      <div class="modal-dialog">
                          <div class="modal-content">
                              <!-- <div  class="modal-close-area modal-close-df">
                                  <a  class="close" data-dismiss="modal" ><i class="fa fa-close"></i></a>
                              </div> -->
                              <div class="modal-body">
                                    <div style="overflow-y: scroll; max-height: 350px;">
                                  <table class="table">
                                      <thead>
                                          <tr>
                                              <th> N° </th>
                                              <th> Choix</th>
                                              <th>Libelle</th>
                                              <th>Quantité</th>
                                          </tr>
                                      </thead>
                                      <tbody>
                                          <tr  *ngFor="let marchandise of marchandises;let i=index" [attr.data-index]="i">
                                              <td>{{marchandise.id}}</td>
                                              <td><input type="checkbox" (click)="ajouter(marchandise, i, 'quantite')"/></td>
                                              <td>{{marchandise.libelle}}</td>
                                              <td><input class="quantite" name="nbM{{marchandise.id}}" value="" (click)="ajouterQuantite($event,marchandise.id)" type="number" aria-valuemin="0"/></td>
                                          </tr>
                                      </tbody>
                                      </table>
                                      </div>
                              </div>
                              <div class="modal-footer">
                                  <a (click)="marchAdder=false;">Ok</a>
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                      <div class="product-payment-inner-st">
                          <ul id="myTabedu1" class="tab-review-design">
                              <li class="active"><a >Enregistrer du bon de commande de la livraison n°112</a></li>
                              
                              
                          </ul>
                          <div id="myTabContent" class="tab-content custom-product-edit">
                              <div class="product-tab-list tab-pane fade active in" id="description">
                                  <div class="row">
                                      <div  class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                          <div class="review-content-section">
                                                  <div *ngIf="isLoading" class="spinner">
                                                          <div class="double-bounce1"></div>
                                                          <div class="double-bounce2"></div>
                                                        </div>
                                                        <div *ngIf="livraison&&!isLoading&&(transits?.length==0)" >
                                                              <p>Désolé aucun transit ne pourra <br> être affectées à la livraison <br> que vous essayez de créer. Veuillez Ajouter <a [routerLink]="['/transitsAdd']" routerLinkActive="active">un nouveau transit</a> Puis revenez ici pour réessayer.</p>
                                                            </div>  
                                                        <div *ngIf="sucess&&!isLoading" >
                                                              <p>Livraison ajoutée avec succès! <a [routerLink]="['/livraisons']" routerLinkActive="active" (click)="setTitle('Sociétés')">Voir les société.</a> </p>
                                                            </div>  
                                                  <form *ngIf="livraison&&!isLoading" (ngSubmit)="onSubmit(livraisonAddForm)" #livraisonAddForm="ngForm" name=livraisonAddForm>
                                                      <div class="row">
                                                          <div class="col-lg-6">
                                                            <div class="form-group">
                                                              <label for="inputState">societe</label>
                                                              <select  name="transit_id" class="form-control">
                                                                <option *ngFor="let societe of societes" [(ngValue)]="societe.id">{{societe.libelle}}</option>
                                                              </select>
                                                            </div>
                                                             
                                                              <div class="form-group">
                                                                  <label for="">Date de livraison attendue</label>
                                                                  <input name="dateConfirmationFournisseur" [(ngModel)]="livraison.dateComfirmationFournisseur" type="date" class="form-control" value="{{livraison?.dateComfirmationFournisseur}}" placeholder="{{livraison?.dateComfirmationFournisseur}}">
                                                              </div>
                                                          </div>
                                                          <div class="col-lg-6">
                                                            <div class="form-group"  >
                                                                <label for="inputState">marchandises &nbsp;</label>
                                                                <button class="btn btn-success" (click)="marchAdder=true"> Ajouter une marchandise</button>
                                                              <div style="overflow-y: scroll; max-height: 150px;">
                                                                <table class="table" >
                                                                    <thead>
                                                                        <tr>
                                                                            <th> N° </th>
                                                                            <th>Libelle</th>
                                                                            <th>Quantité</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody >
                                                                        <tr *ngFor="let marchandise of bdcs.marchandises;let i=index">
                                                                            <td>{{i+1}}</td>
                                                                            <td>{{marchandise.libelle}}</td>
                                                                            <td>{{marchandise.quantite}}</td>
                                                                        </tr>
                                                                    </tbody>
                                                                    </table>
                                                              </div>
                                                                
                                                            </div>
                                                            </div>
                                                      </div>
                                                          <div class="row">
                                                              <div class="col-lg-12">
                                                                  <div class="payment-adress mg-t-15">
                                                                      <button type="submit" class="btn btn-primary waves-effect waves-light mg-b-15">Submit</button>
                                                                  </div>
                                                              </div>
                                                          </div>
                                                      </form>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                              
                              
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
      <div class="single-pro-review-area mt-t-30 mg-b-15" *ngIf="!add">
        <div class="product-status mg-b-15">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                      
                        <div class="product-status-wrap drp-lst">
                            <h4>List des bons de commande</h4>
                            <div class="add-product">
                                <a title="Ajouter une Livraison" (click)="add=true" >Ajouter un bon de commande</a>
                            </div>
                            <div class="asset-inner">
                                <table>
                                    <tbody><tr>
                                        <th>No</th>
                                        <th>Etat de la livraison</th>
                                        <th>Nombre de marchandise</th>
                                        <th>Quantité total</th>
                                        <th>société chargée</th>
                                        <th>Date de livraison prévue</th>
                                        <th>Date de livraison effective</th>
                                    </tr>
                                    <tr *ngFor="let bdc of bdcs" >
                                        <td>{{ bdc?.livraison[0]?.id}}</td>
                                        <td *ngIf="bdc?.livraison[0]?.etats_livraison_id==1"><button class="pd-setting">Livré</button></td>
                                        <td *ngIf="bdc?.livraison[0]?.etats_livraison_id!=1"><button class="ds-setting">En Attente</button></td>
                                        <td>{{ bdc?.nbrM}}</td>
                                        <td>{{ bdc?.qteTotal}}</td>
                                        <td>
                                            {{ bdc?.transit?.societe?.libelle}}
                                        </td>
                                        <td>
                                            {{ bdc?.livraison[0]?.dateLivrDemandeeParBB}}
                                        </td>
                                        <td>
                                            {{ bdc?.livraison[0]?.dateLivrEffectiveBB? bdc?.livraison[0]?.dateLivrEffectiveBB:'?'}}
                                        </td>
                                        <td>
                                            <button [routerLink]="['/bdcs/'+bdc?.id]" routerLinkActive="active" (click)="setTitle('Livraisons')" data-toggle="tooltip" title="" class="pd-setting-ed" data-original-title="Edit"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></button>
                                            <button data-toggle="tooltip" title="" class="pd-setting-ed" data-original-title="Trash"><i class="fa fa-trash-o" aria-hidden="true"></i></button>
                                        </td>
                                    </tr>
                                </tbody></table>
                            </div>
                            <!-- <div class="custom-pagination">
                                <nav aria-label="Page navigation example">
                                    <ul class="pagination">
                                        <li class="page-item"><a class="page-link" href="#">Previous</a></li>
                                        <li class="page-item"><a class="page-link" href="#">1</a></li>
                                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                                        <li class="page-item"><a class="page-link" href="#">Next</a></li>
                                    </ul>
                                </nav>
                            </div> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
      </div>
      </main>